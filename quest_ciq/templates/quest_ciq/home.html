{% extends "quest_ciq/_layout.html" %}

{% block ciq_content %}
<div class="hero bg-gradient-to-r from-primary/10 to-secondary/10 rounded-lg mb-8">
    <div class="hero-content text-center py-12">
        <div class="max-w-2xl">
            <h1 class="text-5xl font-bold mb-4">
                <i class="fas fa-brain text-primary"></i>
                Quest CIQ
            </h1>
            <h2 class="text-2xl font-semibold mb-4">Curiosity Intelligence Quest</h2>
            <p class="text-lg mb-6">
                Embark on interactive learning quests designed to challenge your thinking,
                spark curiosity, and measure your intelligence through creative problem-solving.
            </p>
            <div class="flex gap-4 justify-center">
                <a href="#quests" class="btn btn-primary btn-lg">
                    <i class="fas fa-play mr-2"></i>
                    Start a Quest
                </a>
                <a href="{% url 'quest_ciq:teacher_dashboard' %}" class="btn btn-outline btn-lg">
                    <i class="fas fa-chalkboard-teacher mr-2"></i>
                    Teacher Dashboard
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body items-center text-center">
            <div class="text-5xl mb-4">
                <i class="fas fa-gamepad text-primary"></i>
            </div>
            <h3 class="card-title">Interactive Challenges</h3>
            <p>Engage with multi-level quests that adapt to your responses</p>
        </div>
    </div>

    <div class="card bg-base-100 shadow-xl">
        <div class="card-body items-center text-center">
            <div class="text-5xl mb-4">
                <i class="fas fa-trophy text-secondary"></i>
            </div>
            <h3 class="card-title">Earn & Compete</h3>
            <p>Track your scores and compete on the leaderboard</p>
        </div>
    </div>

    <div class="card bg-base-100 shadow-xl">
        <div class="card-body items-center text-center">
            <div class="text-5xl mb-4">
                <i class="fas fa-chart-line text-accent"></i>
            </div>
            <h3 class="card-title">Measure Growth</h3>
            <p>See detailed analytics of your curiosity intelligence</p>
        </div>
    </div>
</div>

<!-- Available Quests Section -->
<div id="quests" class="mb-12">
    <h2 class="text-3xl font-bold mb-6 flex items-center">
        <i class="fas fa-list-check mr-3 text-primary"></i>
        Available Quests
    </h2>

    {% if active_quests %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for quest in active_quests %}
        <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300">
            <div class="card-body">
                <h3 class="card-title">
                    {{ quest.title }}
                    {% if quest.is_active %}
                    <div class="badge badge-success">Active</div>
                    {% endif %}
                </h3>
                <p class="text-base-content/70">{{ quest.description|truncatewords:20 }}</p>

                <div class="stats stats-vertical shadow mt-4">
                    <div class="stat py-2">
                        <div class="stat-title text-xs">Levels</div>
                        <div class="stat-value text-2xl text-primary">{{ quest.levels.count }}</div>
                    </div>
                    {% if quest.max_participants %}
                    <div class="stat py-2">
                        <div class="stat-title text-xs">Max Participants</div>
                        <div class="stat-value text-2xl text-secondary">{{ quest.max_participants }}</div>
                    </div>
                    {% endif %}
                </div>

                <div class="card-actions justify-end mt-4">
                    <a href="{% url 'quest_ciq:leaderboard' quest.slug %}" class="btn btn-ghost btn-sm">
                        <i class="fas fa-trophy mr-1"></i>
                        Leaderboard
                    </a>
                    <a href="{% url 'quest_ciq:join' quest.slug %}" class="btn btn-primary">
                        <i class="fas fa-play mr-2"></i>
                        Start Quest
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info shadow-lg">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current flex-shrink-0 w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div>
                <h3 class="font-bold">No Quests Available</h3>
                <div class="text-xs">Check back later or contact your teacher to create new quests.</div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- How It Works Section -->
<div class="card bg-base-200 shadow-xl">
    <div class="card-body">
        <h2 class="card-title text-2xl mb-4">
            <i class="fas fa-question-circle text-primary mr-2"></i>
            How It Works
        </h2>
        <div class="steps steps-vertical lg:steps-horizontal w-full">
            <div class="step step-primary">
                <div class="text-left">
                    <div class="font-bold">Choose a Quest</div>
                    <div class="text-sm">Select from available quests</div>
                </div>
            </div>
            <div class="step step-primary">
                <div class="text-left">
                    <div class="font-bold">Complete Levels</div>
                    <div class="text-sm">Answer questions and challenges</div>
                </div>
            </div>
            <div class="step step-primary">
                <div class="text-left">
                    <div class="font-bold">Earn Scores</div>
                    <div class="text-sm">Get points for your responses</div>
                </div>
            </div>
            <div class="step step-primary">
                <div class="text-left">
                    <div class="font-bold">View Results</div>
                    <div class="text-sm">Check your CIQ and leaderboard rank</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

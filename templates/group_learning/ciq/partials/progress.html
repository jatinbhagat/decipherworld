{% comment %}
Reusable progress indicator component
Usage: {% include 'group_learning/ciq/partials/progress.html' with steps=phase_list current_step='empathy' %}
{% endcomment %}

<div class="progress-bar bg-white rounded-xl shadow-md border border-gray-200 p-6 mb-6">
    <div class="flex items-center justify-between relative">
        {% for step in steps %}
            <div class="flex flex-col items-center relative z-10 flex-1">
                <!-- Step Circle -->
                <div class="step-circle w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm
                    {% if step.status == 'completed' %}
                        bg-green-500 text-white
                    {% elif step.status == 'in_progress' %}
                        bg-blue-500 text-white animate-pulse
                    {% else %}
                        bg-gray-200 text-gray-500
                    {% endif %}
                    shadow-md">
                    {% if step.status == 'completed' %}
                        âœ“
                    {% elif step.status == 'in_progress' %}
                        {{ forloop.counter }}
                    {% else %}
                        ðŸ”’
                    {% endif %}
                </div>

                <!-- Step Label -->
                <div class="mt-3 text-center">
                    <div class="font-semibold text-sm
                        {% if step.status == 'completed' %}text-green-700{% elif step.status == 'in_progress' %}text-blue-700{% else %}text-gray-500{% endif %}">
                        {{ step.name }}
                    </div>
                    <div class="text-xs text-gray-500 mt-1">
                        {% if step.status == 'completed' %}âœ… Completed
                        {% elif step.status == 'in_progress' %}ðŸš§ In progress
                        {% else %}ðŸ”’ Locked
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Connector Line -->
            {% if not forloop.last %}
                <div class="connector absolute top-6 left-1/2 transform -translate-y-1/2 h-1 bg-gray-300 z-0"
                     style="width: calc(100% / {{ steps|length }} - 3rem); margin-left: 1.5rem;"></div>
            {% endif %}
        {% endfor %}
    </div>
</div>
